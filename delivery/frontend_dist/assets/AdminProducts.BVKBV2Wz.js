import{u as e,a as r,r as a,j as t,P as s,l as d,w as o,aj as l,T as i,X as n,ak as c}from"./react-vendor.B-6_bSeD.js";import{d as g}from"./index.CiTXjkB3.js";import{c as x,u as m,d as u,e as b}from"./admin.service.Bhn0xwxW.js";import"./vendor.CIrfaz5f.js";import"./utils-vendor.CnGjioV-.js";import"./i18n-vendor.C0y6bc4v.js";function h(){const{t:h}=e(),y=r(),{isAdmin:p,isAuthenticated:f}=g(),[j,v]=a.useState([]),[k,N]=a.useState(!0),[w,C]=a.useState(""),[_,P]=a.useState(!1),[S,F]=a.useState(null),[L,B]=a.useState(!1),[E,q]=a.useState({title:"",description:"",price:0,discount_price:0,is_active:!0,is_featured:!1,category:"",image_url:"",tags:""});a.useEffect(()=>{f&&p?T():y("/")},[f,p]);const T=async e=>{try{N(!0);const r=await x(0,100,e);v(r.products)}catch(r){}finally{N(!1)}},D=()=>{T(w)},z=()=>{F(null),q({title:"",description:"",price:0,discount_price:0,is_active:!0,is_featured:!1,category:"",image_url:"",tags:""}),P(!0)};return k?t.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h("admin.loadingProducts")})]})})})}):t.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 bg-gray-50 dark:bg-gray-950",children:[t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:h("admin.productManagement")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h("admin.productManagementDesc")})]}),t.jsx("div",{className:"flex flex-wrap gap-3",children:t.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-xl hover:shadow-orange-500/50 transition-all",children:[t.jsx(s,{className:"w-5 h-5"}),h("admin.addProduct")]})})]}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(d,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",value:w,onChange:e=>C(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),placeholder:h("admin.searchProductsPlaceholder"),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-900 border-2 border-gray-200 dark:border-gray-800 rounded-xl focus:border-orange-500 focus:outline-none"})]}),t.jsx("button",{onClick:D,className:"px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors",children:h("admin.searchButton")}),w&&t.jsx("button",{onClick:()=>{C(""),T()},className:"px-4 py-3 border-2 border-gray-300 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:h("admin.clearButton")})]})}),0===j.length?t.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-900 rounded-2xl",children:[t.jsx(o,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:h("admin.noProductsFound")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:h(w?"admin.tryDifferentSearch":"admin.addFirstProduct")}),!w&&t.jsx("button",{onClick:z,className:"px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors",children:h("admin.addProduct")})]}):t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg border-2 border-gray-100 dark:border-gray-800 hover:border-orange-500/50 transition-all",children:[t.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-48 object-cover rounded-xl mb-4",onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x200?text=Product"}}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-1",children:e.title}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("span",{className:"text-2xl font-bold text-orange-500",children:["$",e.price.toFixed(2)]}),t.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm font-semibold text-gray-700 dark:text-gray-300",children:e.category})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>(e=>{F(e),q({title:e.title,description:e.description,price:e.price,discount_price:e.discount_price||0,is_active:e.is_active,is_featured:e.is_featured,category:e.category,image_url:e.image_url,tags:e.tags||""}),P(!0)})(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors",children:[t.jsx(l,{className:"w-4 h-4"}),h("common.edit")]}),t.jsxs("button",{onClick:()=>(async e=>{if(window.confirm(h("admin.deleteProductConfirm",{title:e.title})))try{await b(e.id),T(w)}catch(r){alert(h("admin.deleteProductError"))}})(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors",children:[t.jsx(i,{className:"w-4 h-4"}),h("common.delete")]})]})]},e.id))})]}),_&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/70 dark:bg-black/85 backdrop-blur-sm z-[60]",onClick:()=>!L&&P(!1)}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[70] p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-2xl w-full shadow-2xl border-2 border-gray-200 dark:border-gray-800 my-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h(S?"admin.editProduct":"admin.createProduct")}),t.jsx("button",{onClick:()=>P(!1),disabled:L,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:t.jsx(n,{className:"w-6 h-6"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),B(!0);try{S?await m(S.id,E):await u(E),P(!1),T(w)}catch(r){alert(h("admin.saveProductError"))}finally{B(!1)}},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.productTitleLabel")}),t.jsx("input",{type:"text",value:E.title,onChange:e=>q({...E,title:e.target.value}),required:!0,placeholder:h("admin.productTitlePlaceholder"),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.productDescLabel")}),t.jsx("textarea",{value:E.description,onChange:e=>q({...E,description:e.target.value}),required:!0,rows:4,placeholder:h("admin.productDescPlaceholder"),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.priceLabel")}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:E.price,onChange:e=>q({...E,price:parseFloat(e.target.value)||0}),required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.discountPriceLabel")}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:E.discount_price||"",onChange:e=>q({...E,discount_price:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.categoryLabel")}),t.jsxs("select",{value:E.category,onChange:e=>q({...E,category:e.target.value}),required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none",children:[t.jsx("option",{value:"",children:h("admin.selectCategory")}),t.jsx("option",{value:"Electronics",children:h("admin.categoryElectronics")}),t.jsx("option",{value:"Clothing",children:h("admin.categoryClothing")}),t.jsx("option",{value:"Books",children:h("admin.categoryBooks")}),t.jsx("option",{value:"Home",children:h("admin.categoryHome")}),t.jsx("option",{value:"Sports",children:h("admin.categorySports")}),t.jsx("option",{value:"Toys",children:h("admin.categoryToys")}),t.jsx("option",{value:"Beauty",children:h("admin.categoryBeauty")}),t.jsx("option",{value:"Food",children:h("admin.categoryFood")})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.tagsLabel")}),t.jsx("input",{type:"text",value:E.tags||"",onChange:e=>q({...E,tags:e.target.value}),placeholder:h("admin.tagsPlaceholder"),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.imageURLLabel")}),t.jsx("input",{type:"url",value:E.image_url,onChange:e=>q({...E,image_url:e.target.value}),required:!0,placeholder:h("admin.imageURLPlaceholder"),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:E.is_active,onChange:e=>q({...E,is_active:e.target.checked}),className:"w-5 h-5 text-orange-500 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:h("admin.activeCheckbox")})]}),t.jsxs("label",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-750 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:E.is_featured,onChange:e=>q({...E,is_featured:e.target.checked}),className:"w-5 h-5 text-orange-500 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:h("admin.featuredCheckbox")})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>P(!1),disabled:L,className:"flex-1 px-6 py-3 border-2 border-gray-300 dark:border-gray-700 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:h("common.cancel")}),t.jsx("button",{type:"submit",disabled:L,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-xl hover:shadow-orange-500/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:L?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),h("admin.saving")]}):t.jsxs(t.Fragment,{children:[t.jsx(c,{className:"w-5 h-5"}),h(S?"admin.updateButton":"admin.createButton")]})})]})]})]})})]})]})}export{h as default};
