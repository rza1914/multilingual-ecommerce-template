import{u as e,a,r,j as t,b as s,w as d,f as l,aj as n,T as i,X as o}from"./react-vendor.B-6_bSeD.js";import{d as c}from"./index.CiTXjkB3.js";import{f as x,h as m,i as g}from"./admin.service.Bhn0xwxW.js";import"./vendor.CIrfaz5f.js";import"./utils-vendor.CnGjioV-.js";import"./i18n-vendor.C0y6bc4v.js";function h(){const{t:h}=e(),b=a(),{isAdmin:p,isAuthenticated:u}=c(),[y,j]=r.useState([]),[f,v]=r.useState(!0),[N,k]=r.useState("all"),[w,S]=r.useState(null),[C,O]=r.useState(""),[D,$]=r.useState(!1);r.useEffect(()=>{u&&p?_():b("/")},[u,p]);const _=async(e="all")=>{try{v(!0);const a=await x(0,100,e);j(a.orders)}catch(a){}finally{v(!1)}},z=[{value:"all",label:h("admin.allOrders"),count:y.length},{value:"pending",label:h("order.pending"),icon:"â±ï¸"},{value:"processing",label:h("order.processing"),icon:"ðŸ“¦"},{value:"shipped",label:h("order.shipped"),icon:"ðŸšš"},{value:"delivered",label:h("order.delivered"),icon:"âœ…"},{value:"cancelled",label:h("order.cancelled"),icon:"âŒ"}];return f?t.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h("admin.loadingOrders")})]})})})}):t.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 bg-gray-50 dark:bg-gray-950",children:[t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:h("admin.orderManagement")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h("admin.orderManagementDesc")})]}),t.jsx("div",{className:"mb-6 overflow-x-auto",children:t.jsx("div",{className:"flex gap-2 min-w-max",children:z.map(e=>t.jsxs("button",{onClick:()=>{return a=e.value,k(a),void _(a);var a},className:"px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap flex items-center gap-2 "+(N===e.value?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 hover:bg-orange-50 dark:hover:bg-orange-900/20 border-2 border-gray-200 dark:border-gray-800"),children:[e.icon&&t.jsx("span",{children:e.icon}),e.label]},e.value))})}),0===y.length?t.jsxs("div",{className:"text-center py-16 bg-white dark:bg-gray-900 rounded-2xl",children:[t.jsx(s,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:h("admin.noOrdersFound")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"all"===N?h("admin.noOrdersPlaced"):h("admin.noStatusOrders",{status:h(`order.${N}`)})})]}):t.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg border-2 border-gray-100 dark:border-gray-800 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.orderID")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.customer")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.date")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.items")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.total")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.status")}),t.jsx("th",{className:"text-left py-4 px-6 text-gray-600 dark:text-gray-400 font-semibold",children:h("admin.actions")})]})}),t.jsx("tbody",{children:y.map(e=>{return t.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[t.jsx("td",{className:"py-4 px-6",children:t.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["#",e.id.toString().padStart(6,"0")]})}),t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.full_name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.email})]})}),t.jsx("td",{className:"py-4 px-6 text-gray-600 dark:text-gray-400 text-sm",children:(s=e.created_at,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),t.jsx("td",{className:"py-4 px-6",children:t.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm font-semibold",children:[t.jsx(d,{className:"w-4 h-4"}),e.items_count]})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:"font-bold text-orange-500 text-lg",children:(r=e.total,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r))})}),t.jsx("td",{className:"py-4 px-6",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold capitalize ${a=e.status,{pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",processing:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",shipped:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[a]||"bg-gray-100 text-gray-800"}`,children:h(`order.${e.status}`)})}),t.jsx("td",{className:"py-4 px-6",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>b(`/orders/${e.id}`),className:"p-2 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:h("admin.viewDetails"),children:t.jsx(l,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(e=>{S(e),O(e.status)})(e),className:"p-2 text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",title:h("admin.updateStatus"),children:t.jsx(n,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(async e=>{if(window.confirm(h("admin.deleteOrderConfirm",{id:e.id})))try{await g(e.id),_(N)}catch(a){alert(h("admin.deleteOrderError"))}})(e),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:h("admin.deleteOrder"),children:t.jsx(i,{className:"w-5 h-5"})})]})})]},e.id);var a,r,s})})]})})})]}),w&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/70 dark:bg-black/85 backdrop-blur-sm z-[60]",onClick:()=>!D&&S(null)}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[70] p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full shadow-2xl border-2 border-gray-200 dark:border-gray-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h("admin.updateOrderStatus")}),t.jsx("button",{onClick:()=>S(null),disabled:D,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:t.jsx(o,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:[h("admin.orderLabel"),": ",t.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["#",w.id.toString().padStart(6,"0")]})]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[h("admin.customerLabel"),": ",t.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:w.full_name})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:h("admin.newStatus")}),t.jsxs("select",{value:C,onChange:e=>O(e.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:border-orange-500 focus:outline-none",children:[t.jsxs("option",{value:"pending",children:["â±ï¸ ",h("order.pending")]}),t.jsxs("option",{value:"processing",children:["ðŸ“¦ ",h("order.processing")]}),t.jsxs("option",{value:"shipped",children:["ðŸšš ",h("order.shipped")]}),t.jsxs("option",{value:"delivered",children:["âœ… ",h("order.delivered")]}),t.jsxs("option",{value:"cancelled",children:["âŒ ",h("order.cancelled")]})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>S(null),disabled:D,className:"flex-1 px-6 py-3 border-2 border-gray-300 dark:border-gray-700 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:h("common.cancel")}),t.jsx("button",{onClick:async()=>{if(w){$(!0);try{await m(w.id,C),S(null),_(N)}catch(e){alert(h("admin.updateStatusError"))}finally{$(!1)}}},disabled:D,className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-xl hover:shadow-orange-500/50 transition-all disabled:opacity-50",children:D?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),h("admin.updating")]}):h("admin.updateStatus")})]})]})})]})]})}export{h as default};
