import{u as e,a7 as r,a as s,r as a,j as t,A as d,a8 as l,k as i,m as n,w as c,a2 as o,af as x,X as m,B as g,z as h,e as b,ad as p}from"./react-vendor.B-6_bSeD.js";import{g as j,b as y}from"./order.service.Bwm3-Kzy.js";import{d as u}from"./index.CiTXjkB3.js";import"./vendor.CIrfaz5f.js";import"./utils-vendor.CnGjioV-.js";import"./i18n-vendor.C0y6bc4v.js";function f(){var f,N;const{t:v}=e(),{orderId:w}=r(),k=s(),{isAuthenticated:C}=u(),[_,$]=a.useState(null),[S,F]=a.useState(!0),[O,z]=a.useState(!1),[D,L]=a.useState(!1);a.useEffect(()=>{C?w&&M():k("/")},[w,C]);const M=async()=>{try{const e=await j(Number(w));$(e)}catch(e){}finally{F(!1)}};if(S)return t.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4",children:t.jsx("div",{className:"max-w-6xl mx-auto",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:v("order.loadingDetails")})]})})})});if(!_)return t.jsx("div",{className:"min-h-screen pt-24 pb-12 px-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[t.jsx("div",{className:"w-32 h-32 mx-auto rounded-full bg-gradient-to-br from-red-100 to-red-50 dark:from-red-900/20 dark:to-red-800/10 flex items-center justify-center mb-6",children:t.jsx(d,{className:"w-16 h-16 text-red-500"})}),t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:v("order.notFoundTitle")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:v("order.notFoundMessage")}),t.jsx("button",{onClick:()=>k("/orders"),className:"px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-colors",children:v("order.backToOrders")})]})});const T=(e=>{switch(e.toLowerCase()){case"pending":default:return 1;case"processing":return 2;case"shipped":return 3;case"delivered":return 4;case"cancelled":return 0}})(_.status),q=["pending","processing"].includes(_.status.toLowerCase());return t.jsxs("div",{className:"min-h-screen pt-24 pb-12 px-4 bg-gray-50 dark:bg-gray-950",children:[t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("button",{onClick:()=>k("/orders"),className:"inline-flex items-center gap-2 text-orange-500 hover:text-orange-600 mb-6 font-semibold transition-colors",children:[t.jsx(l,{className:"w-5 h-5"}),v("order.backToOrders")]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 mb-8 shadow-lg border-2 border-gray-100 dark:border-gray-800",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:[v("order.orderNumber")," #",_.id.toString().padStart(6,"0")]}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[v("order.placedOn")," ",(A=_.created_at,new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`text-2xl font-bold capitalize ${(e=>{switch(e.toLowerCase()){case"pending":return"text-yellow-600 dark:text-yellow-400";case"processing":return"text-blue-600 dark:text-blue-400";case"shipped":return"text-purple-600 dark:text-purple-400";case"delivered":return"text-green-600 dark:text-green-400";case"cancelled":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}})(_.status)}`,children:v(`order.${_.status.toLowerCase()}`)}),q&&t.jsx("button",{onClick:()=>z(!0),className:"px-4 py-2 border-2 border-red-500 text-red-500 rounded-xl font-semibold hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:v("order.cancelOrder")})]})]}),"cancelled"!==_.status.toLowerCase()&&t.jsx("div",{className:"mt-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex flex-col items-center flex-1",children:[t.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+(T>=1?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:T>=1?t.jsx(i,{className:"w-6 h-6"}):t.jsx(n,{className:"w-6 h-6"})}),t.jsx("p",{className:"text-sm font-semibold "+(T>=1?"text-green-500":"text-gray-500"),children:v("order.confirmed")})]}),t.jsx("div",{className:`flex-1 h-1 ${T>=2?"bg-green-500":"bg-gray-200 dark:bg-gray-700"} mx-2`}),t.jsxs("div",{className:"flex flex-col items-center flex-1",children:[t.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+(T>=2?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:t.jsx(c,{className:"w-6 h-6"})}),t.jsx("p",{className:"text-sm font-semibold "+(T>=2?"text-green-500":"text-gray-500"),children:v("order.processing")})]}),t.jsx("div",{className:`flex-1 h-1 ${T>=3?"bg-green-500":"bg-gray-200 dark:bg-gray-700"} mx-2`}),t.jsxs("div",{className:"flex flex-col items-center flex-1",children:[t.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+(T>=3?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:t.jsx(o,{className:"w-6 h-6"})}),t.jsx("p",{className:"text-sm font-semibold "+(T>=3?"text-green-500":"text-gray-500"),children:v("order.shipped")})]}),t.jsx("div",{className:`flex-1 h-1 ${T>=4?"bg-green-500":"bg-gray-200 dark:bg-gray-700"} mx-2`}),t.jsxs("div",{className:"flex flex-col items-center flex-1",children:[t.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2 "+(T>=4?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400"),children:t.jsx(x,{className:"w-6 h-6"})}),t.jsx("p",{className:"text-sm font-semibold "+(T>=4?"text-green-500":"text-gray-500"),children:v("order.delivered")})]})]})}),"cancelled"===_.status.toLowerCase()&&t.jsx("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border-2 border-red-200 dark:border-red-800",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{className:"w-6 h-6 text-red-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-red-700 dark:text-red-400",children:v("order.orderCancelled")}),t.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:v("order.orderCancelledMessage")})]})]})})]}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg border-2 border-gray-100 dark:border-gray-800",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:[v("order.orderItems")," (",(null==(f=_.items)?void 0:f.length)||0,")"]}),t.jsx("div",{className:"space-y-4",children:null==(N=_.items)?void 0:N.map(e=>{var r,s,a;return t.jsxs("div",{className:"flex gap-4 pb-4 border-b border-gray-200 dark:border-gray-700 last:border-0 last:pb-0",children:[t.jsx("img",{src:null==(r=e.product)?void 0:r.image_url,alt:null==(s=e.product)?void 0:s.title_en,className:"w-24 h-24 object-cover rounded-xl shadow-md cursor-pointer hover:scale-105 transition-transform",onClick:()=>k(`/products/${e.product_id}`),onError:e=>{e.currentTarget.src="https://via.placeholder.com/100?text=Product"}}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1 cursor-pointer hover:text-orange-500 transition-colors",onClick:()=>k(`/products/${e.product_id}`),children:null==(a=e.product)?void 0:a.title_en}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[v("order.quantity"),": ",e.quantity]}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["$",e.price_at_time.toFixed(2)," ",v("order.each")]})]}),t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"font-bold text-lg text-orange-500",children:["$",(e.price_at_time*e.quantity).toFixed(2)]})})]},e.id)})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-lg border-2 border-gray-100 dark:border-gray-800",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:t.jsx(g,{className:"w-5 h-5 text-white"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v("order.shippingAddress")})]}),t.jsxs("div",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[t.jsx("p",{className:"font-semibold",children:_.full_name}),t.jsx("p",{children:_.address}),t.jsxs("p",{children:[_.city,", ",_.state," ",_.zip_code]}),t.jsx("p",{children:_.country}),t.jsxs("div",{className:"flex flex-col gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"text-sm",children:_.phone})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(b,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"text-sm",children:_.email})]})]})]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-xl border-2 border-gray-100 dark:border-gray-800 sticky top-24",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:v("order.orderSummary")}),t.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(o,{className:"w-5 h-5 text-orange-500"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:v("order.deliveryMethod")})]}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:["standard"===_.shipping_method&&v("order.standardShipping"),"express"===_.shipping_method&&v("order.expressShipping"),"nextday"===_.shipping_method&&v("order.nextDayDelivery")]})]}),t.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(p,{className:"w-5 h-5 text-orange-500"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:v("order.paymentMethod")})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:"card"===_.payment_method?v("order.creditDebitCard"):v("order.cashOnDelivery")})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsxs("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[t.jsx("span",{children:v("order.subtotal")}),t.jsxs("span",{children:["$",_.subtotal.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[t.jsx("span",{children:v("order.shipping")}),t.jsxs("span",{children:["$",_.shipping_cost.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[t.jsx("span",{children:v("order.tax")}),t.jsxs("span",{children:["$",_.tax.toFixed(2)]})]}),_.discount>0&&t.jsxs("div",{className:"flex justify-between text-green-600 dark:text-green-400 font-semibold",children:[t.jsx("span",{children:v("order.discount")}),t.jsxs("span",{children:["-$",_.discount.toFixed(2)]})]})]}),t.jsx("div",{className:"pt-4 border-t-2 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:v("order.total")}),t.jsxs("span",{className:"text-3xl font-bold text-orange-500",children:["$",_.total.toFixed(2)]})]})}),t.jsx("button",{onClick:()=>k("/products"),className:"w-full mt-6 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:shadow-xl hover:shadow-orange-500/50 transition-all",children:v("order.continueShopping")})]})})]})]}),O&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black/70 dark:bg-black/85 backdrop-blur-sm z-[60]",onClick:()=>!D&&z(!1)}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[70] p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-8 max-w-md w-full shadow-2xl border-2 border-gray-200 dark:border-gray-800",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(d,{className:"w-10 h-10 text-red-500"})}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:v("order.cancelOrderConfirm")}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:v("order.cancelOrderMessage")})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>z(!1),disabled:D,className:"flex-1 py-3 border-2 border-gray-300 dark:border-gray-700 rounded-xl font-semibold hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors disabled:opacity-50",children:v("order.keepOrder")}),t.jsx("button",{onClick:async()=>{if(_){L(!0);try{const e=await y(_.id);$(e),z(!1)}catch(e){alert(v("order.cancelFailed"))}finally{L(!1)}}},disabled:D,className:"flex-1 py-3 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:D?t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),v("order.cancelling")]}):v("order.yesCancel")})]})]})})]})]});var A}export{f as default};
