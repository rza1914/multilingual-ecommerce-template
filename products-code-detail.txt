=====================================
FILE: E:\template1\multilingual-ecommerce-template\frontend\src\pages\ProductsPage.tsx
=====================================
/**
 * Products Page
 * Browse and filter products with Smart Search
 */

import { useState, useEffect, useCallback } from 'react';
import { useSearchParams, useLocation } from 'react-router-dom';
import { AlertCircle, RefreshCw } from 'lucide-react';
import { Product } from '../types/product.types';
import * as productService from '../services/product.service';
import ProductCard from '../components/products/ProductCard';
import { ProductSkeletonGrid } from '../components/products/ProductSkeleton';
import SmartSearchBar from '../components/ai/SmartSearchBar';
import FiltersSidebar from '../components/products/FiltersSidebar';
import EmptyState from '../components/EmptyState';
import { useTranslation } from 'react-i18next';

const ProductsPage = () => {
  const { t } = useTranslation();
  const [searchParams] = useSearchParams();
  const location = useLocation();
  const [products, setProducts] = useState<Product[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [searchQuery, setSearchQuery] = useState('');
  const [minPrice, setMinPrice] = useState<number | undefined>();
  const [maxPrice, setMaxPrice] = useState<number | undefined>();
  const [isFiltersOpen, setIsFiltersOpen] = useState(false);
  const [filterType, setFilterType] = useState<'featured' | 'new' | 'bestsellers' | null>(null);

  /**
   * Fetch products with filters
   */
  const fetchProducts = useCallback(async (query?: string) => {
    setLoading(true);
    setError(null);

    try {
      const search = query !== undefined ? query : searchQuery;

      let data = await productService.getProducts({
        search: search || undefined,
        minPrice,
        maxPrice,
      });

      // Apply filtering based on filterType
      if (filterType === 'new') {
        data = data.sort((a, b) => {
          if (a.created_at && b.created_at) {
            return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();
          }
          return (b.id || 0) - (a.id || 0);
        }).slice(0, 20);
      } else if (filterType === 'bestsellers') {
        data = data.sort((a, b) => {
          if (a.is_featured && !b.is_featured) return -1;
          if (!a.is_featured && b.is_featured) return 1;
          return (b.rating || 0) - (a.rating || 0);
        }).slice(0, 20);
      } else if (filterType === 'featured') {
        data = data.filter(product => product.is_featured === true);
      }

      setProducts(data);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : t('products.loadError');
      setError(errorMessage);
      console.error('Error fetching products:', err);
    } finally {
      setLoading(false);
    }
  }, [searchQuery, minPrice, maxPrice, filterType, t]);

  // Handle URL parameters
  useEffect(() => {
    const newParam = searchParams.get('new');
    const bestsellersParam = searchParams.get('bestsellers');
    const featuredParam = searchParams.get('featured');

    let newFilterType: 'featured' | 'new' | 'bestsellers' | null = null;

    if (newParam === 'true') {
      newFilterType = 'new';
    } else if (bestsellersParam === 'true') {
      newFilterType = 'bestsellers';
    } else if (featuredParam === 'true') {
      newFilterType = 'featured';
    }

    if (newFilterType !== filterType) {
      setFilterType(newFilterType);
    }

    fetchProducts();
  }, [location.search, fetchProducts, filterType]);

  /**
   * Handle price filter
   */
  const handleFilterChange = useCallback((min?: number, max?: number) => {
    setMinPrice(min);
    setMaxPrice(max);
    setIsFiltersOpen(false);
  }, []);

  /**
   * Handle clear filters
   */
  const handleClearFilters = useCallback(() => {
    setMinPrice(undefined);
    setMaxPrice(undefined);
    setSearchQuery('');
  }, []);

  /**
   * Handle retry on error
   */
  const handleRetry = () => {
    fetchProducts();
  };

  /**
   * Toggle filters sidebar (mobile)
   */
  const toggleFilters = () => {
    setIsFiltersOpen(!isFiltersOpen);
  };

  const hasActiveFilters = searchQuery || minPrice !== undefined || maxPrice !== undefined;

  return (
    <div className="animate-fade-in">
      {/* Page Header */}
      <div className="text-center mb-8">
        <h1 className="text-hero text-gradient-orange mb-4">
          {filterType === 'new' ? t('products.new_arrivals_title', 'New Arrivals') :
           filterType === 'bestsellers' ? t('products.bestsellers_title', 'Bestsellers') :
           filterType === 'featured' ? t('products.featured_title', 'Featured Products') :
           t('products.title')}
        </h1>
        <p className="text-lg text-gray-600 dark:text-gray-400">
          {filterType === 'new' ? t('products.new_arrivals_subtitle', 'Recently added items') :
           filterType === 'bestsellers' ? t('products.bestsellers_subtitle', 'Our most popular items') :
           filterType === 'featured' ? t('products.featured_subtitle', 'Curated selection of our best products') :
           t('products.subtitle')}
        </p>
      </div>

      {/* Smart Search Bar - No legacy toggle */}
      <div className="max-w-3xl mx-auto mb-8">
        <SmartSearchBar
          onSearch={(results: Product[], query?: string) => {
            setProducts(results);
            if (query) {
              setSearchQuery(query);
            }
          }}
        />
      </div>

      {/* Main Content with Sidebar */}
      <div className="flex gap-8">
        {/* Filters Sidebar */}
        <FiltersSidebar
          onFilterChange={handleFilterChange}
          onClearFilters={handleClearFilters}
          isOpen={isFiltersOpen}
          onToggle={toggleFilters}
        />

        {/* Products Grid */}
        <div className="flex-1 min-w-0">
          {/* Products Count & Status */}
          {!loading && !error && (
            <div className="mb-6 flex items-center justify-between">
              <p className="text-gray-600 dark:text-gray-400">
                <span className="font-semibold text-orange-500">
                  {products.length}
                </span>{' '}
                {t(products.length === 1 ? 'products.productFound' : 'products.productsFound')}
                {hasActiveFilters && (
                  <span className="ms-2 text-sm">
                    ({t('products.filtered')})
                  </span>
                )}
              </p>

              {hasActiveFilters && (
                <button
                  onClick={handleClearFilters}
                  className="text-sm text-orange-500 hover:text-orange-600 dark:hover:text-orange-400 transition-colors"
                >
                  {t('products.clearAllFilters')}
                </button>
              )}
            </div>
          )}

          {/* Loading State */}
          {loading && <ProductSkeletonGrid count={6} />}

          {/* Error State */}
          {error && !loading && (
            <div className="text-center py-20">
              <div className="glass-card p-12 max-w-md mx-auto">
                <AlertCircle className="w-16 h-16 text-red-500 mx-auto mb-6" />
                <h3 className="text-2xl font-bold text-gray-900 dark:text-white mb-3">
                  {t('products.errorTitle')}
                </h3>
                <p className="text-gray-600 dark:text-gray-400 mb-6">
                  {error}
                </p>
                <button onClick={handleRetry} className="btn-primary">
                  <RefreshCw className="w-4 h-4 inline me-2" />
                  {t('products.tryAgain')}
                </button>
              </div>
            </div>
          )}

          {/* Empty State */}
          {!loading && !error && products.length === 0 && (
            <EmptyState
              icon="ðŸ”"
              title={hasActiveFilters ? t('products.noProductsFound') : t('products.noProductsAvailable')}
              message={
                hasActiveFilters
                  ? t('products.noProductsFoundMessage')
                  : t('products.noProductsAvailableMessage')
              }
              actionLabel={hasActiveFilters ? t('products.clearFilters') : undefined}
              onAction={hasActiveFilters ? handleClearFilters : undefined}
            />
          )}

          {/* Products Grid */}
          {!loading && !error && products.length > 0 && (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-slide-up">
              {products.map((product, index) => (
                <div
                  key={product.id}
                  className="animate-fade-in"
                  style={{
                    animationDelay: `${index * 50}ms`,
                    animationFillMode: 'backwards',
                  }}
                >
                  <ProductCard product={product} />
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default ProductsPage;

=====================================
FILE: E:\template1\multilingual-ecommerce-template\frontend\src\components\products\FiltersSidebar.tsx
=====================================
/**
 * Filters Sidebar Component
 * Product filtering interface with price range
 */

import React, { useState } from 'react';
import { Filter, X } from 'lucide-react';
import { useTranslation } from 'react-i18next';

interface FiltersSidebarProps {
  onFilterChange: (minPrice?: number, maxPrice?: number) => void;
  onClearFilters: () => void;
  isOpen: boolean;
  onToggle: () => void;
}

const FiltersSidebar: React.FC<FiltersSidebarProps> = ({
  onFilterChange,
  onClearFilters,
  isOpen,
  onToggle,
}) => {
  const { t } = useTranslation();
  const [minPrice, setMinPrice] = useState<string>('');
  const [maxPrice, setMaxPrice] = useState<string>('');

  /**
   * Handle apply filters
   */
  const handleApply = () => {
    const min = minPrice ? parseFloat(minPrice) : undefined;
    const max = maxPrice ? parseFloat(maxPrice) : undefined;

    onFilterChange(min, max);
  };

  /**
   * Handle clear filters
   */
  const handleClear = () => {
    setMinPrice('');
    setMaxPrice('');
    onClearFilters();
  };

  /**
   * Check if filters are active
   */
  const hasActiveFilters = minPrice !== '' || maxPrice !== '';

  return (
    <>
      {/* Mobile Toggle Button */}
      <button
        onClick={onToggle}
        className="lg:hidden fixed bottom-6 right-6 z-40 btn-primary p-4 rounded-full shadow-2xl"
        aria-label={t('buttons.toggleFilters')}
      >
        <Filter className="w-6 h-6" />
        {hasActiveFilters && (
          <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse">
            !
          </span>
        )}
      </button>

      {/* Overlay for Mobile */}
      {isOpen && (
        <div
          className="lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40"
          onClick={onToggle}
        />
      )}

      {/* Sidebar */}
      <aside
        className={`
          fixed lg:sticky top-0 left-0 h-screen lg:h-auto
          w-80 lg:w-auto
          bg-white/95 dark:bg-gray-900/95 lg:bg-transparent
          backdrop-blur-xl lg:backdrop-blur-none
          border-r lg:border-r-0 border-gray-200 dark:border-gray-800
          z-50 lg:z-auto
          transform transition-transform duration-300 ease-in-out
          ${isOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}
        `}
      >
        <div className="p-6 space-y-6">
          {/* Header */}
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-2">
              <Filter className="w-5 h-5 text-orange-500" />
              <h3 className="text-lg font-bold text-gray-900 dark:text-white">
                {t('filters.filters')}
              </h3>
              {hasActiveFilters && (
                <span className="badge-orange text-xs">
                  {t('filters.active')}
                </span>
              )}
            </div>

            {/* Close Button (Mobile) */}
            <button
              onClick={onToggle}
              className="lg:hidden p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors"
              aria-label={t('buttons.closeFilters')}
            >
              <X className="w-5 h-5" />
            </button>
          </div>

          {/* Price Range Filter */}
          <div className="glass-card p-6 space-y-4">
            <h4 className="font-semibold text-gray-900 dark:text-white mb-4">
              {t('filters.priceRange')}
            </h4>

            {/* Min Price */}
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                {t('filters.minPrice')}
              </label>
              <input
                type="number"
                value={minPrice}
                onChange={(e) => setMinPrice(e.target.value)}
                placeholder={t('filters.placeholderMin')}
                min="0"
                step="1"
                className="input-field"
              />
            </div>

            {/* Max Price */}
            <div>
              <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                {t('filters.maxPrice')}
              </label>
              <input
                type="number"
                value={maxPrice}
                onChange={(e) => setMaxPrice(e.target.value)}
                placeholder={t('filters.placeholderMax')}
                min="0"
                step="1"
                className="input-field"
              />
            </div>

            {/* Visual Price Range */}
            <div className="pt-2">
              <div className="flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-2">
                <span>${minPrice || '0'}</span>
                <span>${maxPrice || 'âˆž'}</span>
              </div>
              <div className="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                <div className="h-full bg-gradient-to-r from-orange-500 to-orange-600 rounded-full" />
              </div>
            </div>

            {/* Apply Button */}
            <button
              onClick={handleApply}
              className="btn-primary w-full"
              disabled={!hasActiveFilters}
            >
              {t('filters.applyFilters')}
            </button>
          </div>

          {/* Clear All Button */}
          {hasActiveFilters && (
            <button
              onClick={handleClear}
              className="w-full btn-glass text-red-500 dark:text-red-400 border-red-500/20"
            >
              <X className="w-4 h-4 inline mr-2" />
              {t('filters.clearAll')}
            </button>
          )}

          {/* Filter Info */}
          <div className="glass p-4 rounded-2xl">
            <p className="text-xs text-gray-600 dark:text-gray-400 leading-relaxed">
              <strong className="text-orange-500">{t('filters.tip')}</strong> {t('filters.priceFilterTip')}
            </p>
          </div>
        </div>
      </aside>
    </>
  );
};

export default FiltersSidebar;

=====================================
FILE: E:\template1\multilingual-ecommerce-template\frontend\src\components\ai\AIQuickActions.tsx
=====================================
/**
 * AI Quick Actions Component
 * Provides predefined AI prompts for common tasks
 * RTL/LTR safe with glass-card styling
 */

import React, { useState, useRef, useEffect } from 'react';
import {
  Sparkles,
  Scale,
  Ruler,
  MessageSquare,
  TrendingDown,
  Wallet,
  ChevronDown
} from 'lucide-react';
import { useTranslation } from 'react-i18next';

export interface QuickAction {
  id: string;
  icon: React.ReactNode;
  labelKey: string;
  prompt: string;
}

interface AIQuickActionsProps {
  onActionSelect: (prompt: string) => void;
  className?: string;
}

const AIQuickActions: React.FC<AIQuickActionsProps> = ({ onActionSelect, className = '' }) => {
  const { t } = useTranslation();
  const [isOpen, setIsOpen] = useState(false);
  const menuRef = useRef<HTMLDivElement>(null);

  // Quick AI Actions configuration
  const quickActions: QuickAction[] = [
    {
      id: 'compare_prices',
      icon: <Scale className="w-4 h-4" />,
      labelKey: 'ai.actions.comparePrices',
      prompt: 'Compare prices of similar products and find the best deal'
    },
    {
      id: 'find_size',
      icon: <Ruler className="w-4 h-4" />,
      labelKey: 'ai.actions.findSize',
      prompt: 'Help me find the correct size based on my preferences'
    },
    {
      id: 'summarize_reviews',
      icon: <MessageSquare className="w-4 h-4" />,
      labelKey: 'ai.actions.summarizeReviews',
      prompt: 'Summarize customer reviews and highlight pros and cons'
    },
    {
      id: 'suggest_alternatives',
      icon: <TrendingDown className="w-4 h-4" />,
      labelKey: 'ai.actions.cheaperAlternatives',
      prompt: 'Suggest similar products with lower price'
    },
    {
      id: 'budget_search',
      icon: <Wallet className="w-4 h-4" />,
      labelKey: 'ai.actions.budgetSearch',
      prompt: 'Find the best products within my budget'
    }
  ];

  // Close menu on click outside
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as HTMLElement)) {
        setIsOpen(false);
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  // Close menu on Escape key
  useEffect(() => {
    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') setIsOpen(false);
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
    }
    return () => document.removeEventListener('keydown', handleEscape);
  }, [isOpen]);

  const handleActionClick = (action: QuickAction) => {
    onActionSelect(action.prompt);
    setIsOpen(false);
  };

  return (
    <div className={`relative ${className}`} ref={menuRef}>
      {/* Trigger Button */}
      <button
        type="button"
        onClick={() => setIsOpen(!isOpen)}
        className={`glass-orange p-2.5 rounded-xl flex items-center gap-1.5
                    hover:scale-105 transition-all duration-200
                    ${isOpen ? 'ring-2 ring-orange-500/50' : ''}`}
        aria-expanded={isOpen}
        aria-haspopup="true"
        aria-label={t('ai.quickActions', 'AI Quick Actions')}
      >
        <Sparkles className="w-5 h-5 text-orange-500" />
        <ChevronDown className={`w-3.5 h-3.5 text-orange-500 transition-transform duration-200
                                 ${isOpen ? 'rotate-180' : ''}`} />
      </button>

      {/* Dropdown Menu */}
      {isOpen && (
        <div
          className="absolute z-50 mt-2 w-64
                     ltr:right-0 rtl:left-0
                     glass-card !rounded-2xl border-2 border-orange-500/30
                     shadow-2xl animate-scale-in overflow-hidden"
          role="menu"
          aria-orientation="vertical"
        >
          {/* Header */}
          <div className="px-4 py-3 border-b border-white/10">
            <div className="flex items-center gap-2">
              <Sparkles className="w-4 h-4 text-orange-500" />
              <span className="text-sm font-semibold text-gray-900 dark:text-white">
                {t('ai.quickActionsTitle', 'AI Quick Actions')}
              </span>
            </div>
            <p className="text-xs text-gray-500 dark:text-gray-400 mt-1">
              {t('ai.quickActionsSubtitle', 'Select an action to get started')}
            </p>
          </div>

          {/* Actions List */}
          <div className="py-1">
            {quickActions.map((action) => (
              <button
                key={action.id}
                type="button"
                onClick={() => handleActionClick(action)}
                className="w-full px-4 py-3 flex items-center gap-3
                           hover:bg-orange-500/10 transition-colors
                           text-start"
                role="menuitem"
              >
                <div className="glass-orange p-2 rounded-lg flex-shrink-0">
                  {action.icon}
                </div>
                <div className="flex-1 min-w-0">
                  <span className="text-sm font-medium text-gray-900 dark:text-white">
                    {t(action.labelKey, action.id.replace('_', ' '))}
                  </span>
                </div>
              </button>
            ))}
          </div>

          {/* Footer Hint */}
          <div className="px-4 py-2 border-t border-white/10 bg-orange-500/5">
            <p className="text-xs text-gray-500 dark:text-gray-400 text-center">
              {t('ai.poweredBy', 'âœ¨ Powered by AI')}
            </p>
          </div>
        </div>
      )}
    </div>
  );
};

export default AIQuickActions;

=====================================
FILE: E:\template1\multilingual-ecommerce-template\frontend\src\components\chat\AIActionsMenu.tsx
=====================================
import React from 'react';
import { TFunction } from 'i18next';
import { Image, Sparkles, Gift, Ruler, TrendingUp } from 'lucide-react';
import { AIAction } from '../../types/chat.types';

interface AIActionsMenuProps {
  onAction: (action: AIAction) => void;
  onClose: () => void;
  darkMode: boolean;
  t: TFunction;
}

export const AIActionsMenu: React.FC<AIActionsMenuProps> = ({
  onAction,
  onClose,
  darkMode,
  t
}) => {
  const actions = [
    {
      id: 'image_analysis',
      icon: Image,
      label: t('chat.aiActions.imageAnalysis', 'Image Analysis'),
      description: t('chat.aiActions.imageAnalysisDesc', 'Upload an image to analyze products')
    },
    {
      id: 'product_recommendation',
      icon: Sparkles,
      label: t('chat.aiActions.productRecommendation', 'Product Recommendations'),
      description: t('chat.aiActions.productRecommendationDesc', 'Get personalized product suggestions')
    },
    {
      id: 'price_comparison',
      icon: TrendingUp,
      label: t('chat.aiActions.priceComparison', 'Price Comparison'),
      description: t('chat.aiActions.priceComparisonDesc', 'Compare prices across stores')
    },
    {
      id: 'size_recommendation',
      icon: Ruler,
      label: t('chat.aiActions.sizeRecommendation', 'Size Recommendation'),
      description: t('chat.aiActions.sizeRecommendationDesc', 'Get perfect size suggestions')
    },
    {
      id: 'gift_suggestion',
      icon: Gift,
      label: t('chat.aiActions.giftSuggestion', 'Gift Suggestions'),
      description: t('chat.aiActions.giftSuggestionDesc', 'Find perfect gifts for anyone')
    },
  ];

  // Close menu if clicked outside
  React.useEffect(() => {
    const handleClickOutside = (e: MouseEvent) => {
      if (e.target instanceof HTMLElement) {
        if (!e.target.closest('.ai-actions-menu')) {
          onClose();
        }
      }
    };

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, [onClose]);

  return (
    <div
      className={`
        ai-actions-menu absolute bottom-16 left-3 right-3 z-10 rounded-xl p-3
        ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}
        border shadow-lg
      `}
      role="menu"
    >
      <div className="grid grid-cols-2 gap-2">
        {actions.map((action) => {
          const IconComponent = action.icon;
          return (
            <button
              key={action.id}
              onClick={() => onAction(action.id as AIAction)}
              className={`
                flex flex-col items-center p-3 rounded-lg
                ${darkMode
                  ? 'hover:bg-gray-700 text-gray-200 focus:ring-orange-500'
                  : 'hover:bg-gray-100 text-gray-800 focus:ring-orange-500'}
                transition-colors focus:outline-none focus:ring-2
              `}
              role="menuitem"
              aria-label={action.description}
              tabIndex={0}
            >
              <div className={`
                p-2 rounded-full mb-1
                ${darkMode ? 'bg-gray-700 text-orange-400' : 'bg-orange-100 text-orange-600'}
              `} aria-hidden="true">
                <IconComponent className="w-5 h-5" />
              </div>
              <span className="text-xs font-medium text-center">{action.label}</span>
            </button>
          );
        })}
      </div>
    </div>
  );
};